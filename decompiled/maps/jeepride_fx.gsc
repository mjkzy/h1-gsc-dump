// H1 GSC SOURCE
// Decompiled by https://github.com/xensik/gsc-tool

main()
{
    level._effect["car_damage_blacksmoke_fire"] = loadfx( "fx/smoke/car_damage_blacksmoke_fire" );
    level._effect["fire_crash_jeepride"] = loadfx( "vfx/fire/fire_crash_jeepride" );
    level._effect["fire_trail_l_jeepride_rotor_tail"] = loadfx( "fx/fire/fire_trail_l_jeepride_rotor_tail" );
    level._effect["mi24p_cockpite_fire_chd"] = loadfx( "vfx/fire/mi24p_cockpite_fire_chd" );
    level._effect["helicopter_rotor_damaged_fire_jeepride"] = loadfx( "vfx/fire/helicopter_rotor_damaged_fire_jeepride" );
    level._effect["fire_trail_l_jeepride"] = loadfx( "fx/fire/fire_trail_l_jeepride" );
    level._effect["waterfall_splash_lg_jeepride"] = loadfx( "vfx/map/jeepride/waterfall_splash_lg_jeepride" );
    level._effect["waterfall_splash_dark_lg_jeepride"] = loadfx( "vfx/map/jeepride/waterfall_splash_dark_lg_jeepride" );
    level._effect["waterfall_mist_jeepride"] = loadfx( "vfx/map/jeepride/waterfall_mist_jeepride" );
    level._effect["waterfall_rainbow_soft_jeepride"] = loadfx( "vfx/map/jeepride/waterfall_rainbow_soft_jeepride" );
    level._effect["fx_sunflare"] = loadfx( "vfx/lensflare/fx_sunflare_jeepride" );
    level._effect["hawks"] = loadfx( "fx/misc/hawks" );
    level._effect["birds"] = loadfx( "vfx/animal/birds_tree_flyout_jeepride" );
    level._effect["birds_2"] = loadfx( "vfx/animal/birds_tree_flyout_jeepride_2" );
    level._effect["bird_seagull_flock_large"] = loadfx( "fx/misc/bird_seagull_flock_large" );
    level._effect["mist_icbm"] = loadfx( "fx/weather/mist_icbm" );
    level._effect["exp_wall"] = loadfx( "fx/props/wallExp_concrete" );
    level._effect["leaves_fall"] = loadfx( "vfx/wind/leaves_fall_jeepride" );
    level._effect["leaves_fall_2"] = loadfx( "vfx/wind/leaves_fall_jeepride" );
    level._effect["leaves_fall_3"] = loadfx( "vfx/wind/leaves_fall_jeepride" );
    level._effect["leaves_fall_4"] = loadfx( "vfx/wind/leaves_fall_jeepride" );
    level._effect["leaves_fall_5"] = loadfx( "vfx/wind/leaves_fall_jeepride" );
    level._effect["heli_dust_jeepride"] = loadfx( "fx/treadfx/heli_dust_jeepride" );
    level._effect["heli_dust_jeepride2"] = loadfx( "fx/treadfx/heli_dust_jeepride2" );
    level._effect["heli_dust_jeepride3"] = loadfx( "fx/treadfx/heli_dust_jeepride3" );
    level._effect["heli_dust_jeepride4"] = loadfx( "fx/treadfx/heli_dust_jeepride4" );
    level._effect["heli_water_jeepride"] = loadfx( "fx/treadfx/heli_water_jeepride" );
    level._effect["dust_falling_edge_thick_jeepride"] = loadfx( "vfx/dust/dust_falling_edge_thick_jeepride" );
    level._effect["dust_falling_edge_thick_runne_jeepride"] = loadfx( "vfx/dust/dust_falling_edge_thick_runne_jeepride" );
    level._effect["dust_falling_ceiling_runner_jeepride"] = loadfx( "vfx/dust/dust_falling_ceiling_runner_jeepride" );
    level._effect["dust_falling_ceiling_gray_runner_jeepride"] = loadfx( "vfx/dust/dust_falling_ceiling_gray_runner_jeepride" );
    level._effect["dust_falling_edge_thick_gray_jeepride"] = loadfx( "vfx/dust/dust_falling_edge_thick_gray_jeepride" );
    level._effect["dust_falling_edge_thick_gray_runner_jeepride"] = loadfx( "vfx/dust/dust_falling_edge_thick_gray_runner_jeepride" );
    level._effect["tunel_wall_debris_jeepride"] = loadfx( "fx/explosions/tunel_wall_debris_jeepride" );
    level._effect["dust_falling_ceiling_enlightened_runner_jeepride"] = loadfx( "vfx/dust/dust_falling_ceiling_enlightened_runner_jeepride" );
    level._effect["godray_tree"] = loadfx( "vfx/lights/light_godray_trees_jeepride" );
    level._effect["godray_tunnel"] = loadfx( "vfx/lights/light_godray_tunnel_inner_jeepride" );
    level._effect["godray_tunnel_open"] = loadfx( "vfx/lights/light_godray_tunnel_open_jeepride" );
    level._effect["street_godray_jeepride"] = loadfx( "vfx/map/jeepride/street_godray_jeepride" );
    level._effect["cloud_bank_road"] = loadfx( "fx/weather/jeepride_cloud_bank_road" );
    level._effect["cloud_bank_road_2"] = loadfx( "fx/weather/jeepride_cloud_bank_road" );
    level._effect["cloud_bank_road_3"] = loadfx( "fx/weather/jeepride_cloud_bank_road" );
    level._effect["cloud_bank_road_4"] = loadfx( "fx/weather/jeepride_cloud_bank_road" );
    level._effect["cloud_bank_road_5"] = loadfx( "fx/weather/jeepride_cloud_bank_road" );
    level._effect["cloud_bank_far"] = loadfx( "fx/weather/jeepride_cloud_bank_far" );
    level._effect["cloud_bank_far_sml"] = loadfx( "fx/weather/jeepride_cloud_bank_far_sml" );
    level._effect["cloud_bank_far_lrg"] = loadfx( "fx/weather/jeepride_cloud_bank_far_lrg" );
    level._effect["cloud_mountain_med"] = loadfx( "vfx/cloud/cloud_mountain_med_jeepride" );
    level._effect["cloud_mountain_lrg"] = loadfx( "vfx/cloud/cloud_mountain_lrg_jeepride" );
    level._effect["cloud_mountain_lrg2"] = loadfx( "vfx/cloud/cloud_mountain_lrg2_jeepride" );
    level._effect["cloud_mountain_lrg3"] = loadfx( "vfx/cloud/cloud_mountain_lrg3_jeepride" );
    level._effect["cloud_mountain_liar"] = loadfx( "vfx/cloud/cloud_mountain_lrg3_jeepride" );
    level._effect["fog_mountain_patch_jeepride"] = loadfx( "vfx/fog/fog_mountain_patch_jeepride" );
    level._effect["veh_collision_metal_shards_jeepride"] = loadfx( "vfx/vehiclecollision/veh_collision_metal_shards_jeepride" );
    level._effect["veh_collision_sparks_jeepride"] = loadfx( "vfx/vehiclecollision/veh_collision_sparks_jeepride" );
    level._effect["veh_collision_asphalt_jeepride"] = loadfx( "vfx/vehiclecollision/veh_collision_asphalt_jeepride" );
    level._effect["brake_smk_jeepride"] = loadfx( "vfx/smoke/brake_smk_jeepride" );
    level._effect["concrete_wall_chunk_exp_jeepride"] = loadfx( "vfx/destructible/concrete_wall_chunk_exp_jeepride" );
    level._effect["brick_breakable_piece_01_jeepride"] = loadfx( "vfx/destructible/brick_breakable_piece_01_jeepride" );
    level._effect["truck_tunnel_explosion_jeepride"] = loadfx( "vfx/explosion/truck_tunnel_explosion_jeepride" );
    level._effect["tunnel_column"] = loadfx( "fx/props/jeepride_pillars" );
    level._effect["tunnel_brace"] = loadfx( "fx/props/jeepride_brace" );
    level._effect["tunnel_brace_lit"] = loadfx( "fx/props/jeepride_brace_enlightened" );
    level._effect["tunnelspark"] = loadfx( "fx/misc/jeepride_tunnel_sparks" );
    level._effect["tunnelspark_dl"] = loadfx( "fx/misc/jeepride_tunnel_sparks" );
    level._effect["tanker_sparker"] = loadfx( "fx/misc/jeepride_tanker_sparks" );
    level.flare_fx["hind"] = loadfx( "fx/misc/flares_cobra" );
    level._effect["tire_deflate"] = loadfx( "fx/impacts/jeepride_tire_shot" );
    level._effect["truck_busts_pillar"] = loadfx( "fx/explosions/wall_explosion_draft" );
    level._effect["truck_crash_flame_spectacular"] = loadfx( "fx/misc/blank" );
    level._effect["truck_crash_flame_spectacular_arial"] = loadfx( "fx/misc/blank" );
    level._effect["truck_splash"] = loadfx( "fx/explosions/mortarExp_water" );
    level._effect["cliff_explode_jeepride"] = loadfx( "fx/explosions/cliff_explode_jeepride" );
    level._effect["vehicle_explosion_generic"] = loadfx( "fx/explosions/large_vehicle_explosion" );
    level._effect["vehicle_explosion_firey_impact_jeepride"] = loadfx( "vfx/explosion/vehicle_explosion_firey_impact_jeepride" );
    level._effect["pickuptruck_civilian_rockcrash"] = loadfx( "vfx/map/jeepride/pickuptruck_civilian_rockcrash" );
    level._effect["sedan_impact_civilian_treecrash"] = loadfx( "vfx/map/jeepride/sedan_impact_civilian_treecrash" );
    level._effect["jeep_tire_hit_sedan"] = loadfx( "vfx/map/jeepride/jeep_tire_hit_sedan" );
    level._effect["tanker_explosion_large_jeepride"] = loadfx( "vfx/map/jeepride/tanker_explosion_large_jeepride" );
    level._effect["tanker_gaz_leak_jeepride"] = loadfx( "vfx/map/jeepride/tanker_gaz_leak_jeepride" );
    level._effect["jeep_tire_hit_cliff"] = loadfx( "vfx/map/jeepride/jeep_tire_hit_cliff" );
    level._effect["tanker_gaz_small_leak_jeepride"] = loadfx( "vfx/map/jeepride/tanker_gaz_small_leak_jeepride" );
    level._effect["jeep_tire_hit_tanker"] = loadfx( "vfx/map/jeepride/jeep_tire_hit_tanker" );
    level._effect["tanker_gaz_fire_poured"] = loadfx( "vfx/map/jeepride/tanker_gaz_fire_poured" );
    level._effect["tanker_truck_explosion_end"] = loadfx( "vfx/map/jeepride/tanker_truck_explosion_end" );
    level._effect["rpg_trail"] = loadfx( "fx/smoke/smoke_geotrail_rpg" );
    level._effect["rpg_flash"] = loadfx( "fx/muzzleflashes/at4_flash" );
    level._effect["rpg_explode"] = loadfx( "fx/explosions/default_explosion" );
    level._effect["rocket_trail"] = loadfx( "fx/smoke/smoke_geotrail_rocket_jeepride" );
    level._effect["cliff_collapse_dust_jp"] = loadfx( "vfx/map/jeepride/cliff_collapse_dust_jp" );
    level._effect["cliff_collapse_dust_multiple_jp"] = loadfx( "vfx/map/jeepride/cliff_collapse_dust_multiple_jp" );
    level._effect["cliff_collapse_dust_multiple_2_jp"] = loadfx( "vfx/map/jeepride/cliff_collapse_dust_multiple_2_jp" );
    level._effect["offroad_truck_tire_smoke"] = loadfx( "vfx/map/jeepride/offroad_truck_tire_smoke" );
    level._effect["offroad_truck_tire_hit_concrete"] = loadfx( "vfx/map/jeepride/offroad_truck_tire_hit_concrete" );
    level._effect["offroad_truck_motor_fire"] = loadfx( "vfx/map/jeepride/offroad_truck_motor_fire" );
    level._effect["offroad_truck_hit_water"] = loadfx( "vfx/map/jeepride/offroad_truck_hit_water" );
    level._effect["offroad_truck_explosion"] = loadfx( "vfx/map/jeepride/offroad_truck_explosion" );
    level._effect["pickuptruck_civilian_concretecrash"] = loadfx( "vfx/map/jeepride/pickuptruck_civilian_concretecrash" );
    level._effect["bridge_explosion"] = loadfx( "fx/explosions/jeepride_bridge_explosion_seg" );
    level._effect["bridge_explosion_sound"] = loadfx( "fx/explosions/jeepride_bridge_explosion_seg_s" );
    level._effect["bridge_chunks"] = loadfx( "fx/misc/jeepride_chunk_thrower" );
    level._effect["bridge_chunks2"] = loadfx( "fx/misc/jeepride_chunk_thrower2" );
    level._effect["bridge_hubcaps"] = loadfx( "fx/misc/jeepride_hubcap_thrower" );
    level._effect["bridge_crack_smoke"] = loadfx( "fx/smoke/jeepride_crack_smoke" );
    level._effect["bridge_sparks"] = loadfx( "vfx/explosion/sparks_jeepride" );
    level._effect["bridge_idle_fire"] = loadfx( "vfx/fire/fire_idle_jeepride" );
    level._effect["bridge_idle_fire_2"] = loadfx( "vfx/fire/fire_idle_jeepride_2" );
    level._effect["bridge_idle_fire_3"] = loadfx( "vfx/fire/fire_idle_jeepride_3" );
    level._effect["bridge_ashes"] = loadfx( "vfx/ash/ash_falling_jeepride" );
    level._effect["bridge_ashes_hvy"] = loadfx( "vfx/ash/ash_falling_jeepride_hvy" );
    level._effect["bridge_amb_smk"] = loadfx( "vfx/smoke/battlefield_smk_jeepride" );
    level._effect["bridge_amb_smk_2"] = loadfx( "vfx/smoke/battlefield_smk_jeepride_2" );
    level._effect["bridge_amb_smk_3"] = loadfx( "vfx/smoke/battlefield_smk_jeepride_3" );
    level._effect["bridge_amb_smk_4"] = loadfx( "vfx/smoke/battlefield_smk_jeepride_4" );
    level._effect["bridge_amb_smk_cin"] = loadfx( "vfx/smoke/battlefield_smk_jeepride_cin" );
    level._effect["bridge_amb_smk_griggs"] = loadfx( "vfx/smoke/battlefield_smk_jeepride_griggs_cin" );
    level._effect["bridge_amb_smk_price"] = loadfx( "vfx/smoke/battlefield_smk_jeepride_price_cin" );
    level._effect["bridge_falling_dust_loop"] = loadfx( "vfx/rock/bridge_falling_dust_loop" );
    level._effect["bridge_chopper_end_tread"] = loadfx( "fx/treadfx/heli_dust_jeepride4" );
    level._effect["bridge_chunk_rail"] = loadfx( "vfx/explosion/jeepride_bridge_rail_destroy" );
    level._effect["bridge_chunk_asphalt"] = loadfx( "vfx/explosion/jeepride_bridge_asphalt_destroy" );
    level._effect["bridge_addon"] = loadfx( "vfx/explosion/jeepride_bridge_explosion_addon" );
    level._effect["bridge_leftovers"] = loadfx( "vfx/explosion/jeepride_bridge_explosion_leftovers" );
    level._effect["bridge_leftovers_2"] = loadfx( "vfx/explosion/jeepride_bridge_explosion_leftovers_2" );
    level._effect["bloodpool"] = loadfx( "fx/impacts/deathfx_bloodpool" );
    level._effect["bloodsplash"] = loadfx( "vfx/unique/gas_death_shot" );
    level._effect["smoke_ambient"] = loadfx( "vfx/smoke/smoke_ambient_black_jeepride" );
    level._effect["smoke_column"] = loadfx( "vfx/smoke/smoke_column_black_jeepride" );
    level._effect["smoke_column_black_far_jeepride"] = loadfx( "vfx/smoke/smoke_column_black_far_jeepride" );
    level._effect["smoke_side_bridge"] = loadfx( "vfx/smoke/smoke_bridge_side_jeepride" );
    level._effect["bridge_car_impact"] = loadfx( "vfx/unique/collision_impact_car_bridge" );
    level._effect["bridge_tanker_ignition"] = loadfx( "vfx/fire/tanker_ignition_bridge_jeepride" );
    level._effect["bridge_tanker_explode"] = loadfx( "vfx/explosion/tanker_explosion_bridge_jeepride" );
    level._effect["bridge_collapse_dust"] = loadfx( "vfx/rock/bridge_falling_dust_cin" );
    level._effect["bridge_collapse_dust_os"] = loadfx( "vfx/rock/bridge_falling_dust_os_cin" );
    level._effect["bridge_collapse_stone_impact"] = loadfx( "vfx/rock/bridge_stone_impact_cin" );
    level._effect["bridge_collapse_stone_detach"] = loadfx( "vfx/rock/bridge_stone_detach_cin" );
    level._effect["bridge_collapse_spark"] = loadfx( "vfx/unique/bridge_spark_hit_cin" );
    level._effect["bridge_collapse_frame_hit"] = loadfx( "vfx/unique/bridge_frame_hit_cin" );
    level._effect["bridge_idle_fire_cin"] = loadfx( "vfx/fire/fire_idle_jeepride_cin" );
    level._effect["bridge_idle_fire_2_cin"] = loadfx( "vfx/fire/fire_idle_jeepride_2_cin" );
    level._effect["bridge_small_exp_cin"] = loadfx( "vfx/explosion/small_vehicle_explosion_cin" );
    level._effect["bridge_sparks_wagon_cin"] = loadfx( "fx/misc/jeepride_sparks_wagon_cin" );
    level._effect["bridge_sparks_uaz_cin"] = loadfx( "fx/misc/jeepride_sparks_uaz_cin" );
    level._effect["bridge_grind_cin"] = loadfx( "fx/misc/jeepride_grind_cin" );
    level._effect["griggs_pistol"] = loadfx( "vfx/unique/griggs_shooting_eagle" );
    level._effect["griggs_pistol_bullet"] = loadfx( "vfx/unique/griggs_shooting_eagle_bullet" );
    level._effect["griggs_saw"] = loadfx( "vfx/unique/griggs_shooting_saw" );
    level._effect["griggs_saw_bullet"] = loadfx( "vfx/unique/griggs_shooting_saw_bullet" );
    level._effect["griggs_brains"] = loadfx( "vfx/unique/griggs_death_shot" );
    level._effect["griggs_bullets"] = loadfx( "vfx/unique/bullet_shot_jeepride" );
    level._effect["griggs_bullets_staged"] = loadfx( "vfx/unique/bullet_shot_jeepride_staged" );
    level._effect["helicopter_rotor_staged"] = loadfx( "fx/explosions/helicopter_explosion_jeepride_rotor" );
    level._ak_impacts = [];
    level._ak_impacts["concrete"] = loadfx( "fx/impacts/large_concrete_1" );
    level._ak_impacts["dirt"] = loadfx( "fx/impacts/large_dirt_1" );
    level._ak_impacts["glass"] = loadfx( "fx/impacts/large_glass" );
    level._ak_impacts["grass"] = loadfx( "fx/impacts/small_grass" );
    level._ak_impacts["gravel"] = loadfx( "fx/impacts/large_gravel" );
    level._ak_impacts["metal"] = loadfx( "fx/impacts/large_metalhit_1" );
    level._ak_impacts["rock"] = loadfx( "fx/impacts/large_rock_1" );
    level._ak_impacts["wood"] = loadfx( "fx/impacts/large_woodhit" );
    level._ak_impacts["asphalt"] = loadfx( "fx/impacts/large_asphalt" );
    level._ak_impacts["rubber"] = loadfx( "fx/impacts/default_hit" );
    level._ak_impacts["paintedmetal"] = loadfx( "fx/impacts/large_metal_painted_hit" );
    maps\_vehicle::build_deathfx_override( "script_vehicle_mi24p_hind_woodland", "hind", "vehicle_mi24p_hind_woodland", "fx/explosions/helicopter_explosion_jeepride", undefined, "hind_helicopter_hit", undefined, undefined, undefined, 0.1, 1 );
    maps\_vehicle::build_deathfx_override( "script_vehicle_bm21_cover_destructible", "bm21_troops", "vehicle_bm21_cover_destructible", "fx/explosions/small_vehicle_explosion", undefined, "car_explode", undefined, undefined, undefined, 0 );
    maps\_vehicle::build_deathfx_override( "script_vehicle_bm21_cover_destructible", "bm21_troops", "vehicle_bm21_cover_destructible", "fx/fire/firelp_med_pm", "tag_fx_tire_right_r", "smallfire", undefined, undefined, 1, 0 );
    maps\_vehicle::build_deathfx_override( "script_vehicle_bm21_cover_destructible", "bm21_troops", "vehicle_bm21_cover_destructible", "fx/fire/firelp_med_pm", "tag_fx_cab", "smallfire", undefined, undefined, 1, 0 );
    maps\_vehicle::build_deathfx_override( "script_vehicle_bm21_mobile_bed_destructible", "bm21_troops", "vehicle_bm21_mobile_bed_destructible", "fx/explosions/small_vehicle_explosion", undefined, "car_explode", undefined, undefined, undefined, 0 );
    maps\_vehicle::build_deathfx_override( "script_vehicle_bm21_mobile_bed_destructible", "bm21_troops", "vehicle_bm21_mobile_bed_destructible", "fx/fire/firelp_med_pm", "tag_fx_tire_right_r", "smallfire", undefined, undefined, 1, 0 );
    maps\_vehicle::build_deathfx_override( "script_vehicle_bm21_mobile_bed_destructible", "bm21_troops", "vehicle_bm21_mobile_bed_destructible", "fx/fire/firelp_med_pm", "tag_fx_cab", "smallfire", undefined, undefined, 1, 0 );
    treadfx_override();
    thread init_collapsing_bridge_parts();
    maps\createfx\jeepride_fx::main();
    maps\createfx\jeepride_sound::main();
    remove_light_group_from_vehicle( "script_vehicle_mi17_woodland_fly_cheap", "interior" );
    remove_light_group_from_vehicle( "script_vehicle_mi24p_hind_woodland", "interior" );
    remove_light_group_from_vehicle( "script_vehicle_mi28_flying", "interior" );
    remove_light_group_from_vehicle( "script_vehicle_mi17_woodland_fly", "interior" );
}

jeepride_fxline()
{
    maps\scriptgen\jeepride_fxline_0::fxline();
    maps\scriptgen\jeepride_fxline_1::fxline();
    maps\scriptgen\jeepride_fxline_2::fxline();
    maps\scriptgen\jeepride_fxline_3::fxline();
    maps\scriptgen\jeepride_fxline_4::fxline();
    maps\scriptgen\jeepride_fxline_5::fxline();
}

apply_ghettotag( var_0, var_1 )
{
    self endon( "ghettotag_removed" );

    if ( !isdefined( var_1 ) )
        var_1 = "tag_body";

    if ( !isdefined( var_0 ) )
        var_0 = self.model;

    if ( !isdefined( level.ghettotag ) || !isdefined( level.ghettotag[var_0] ) )
        return;

    self.ghettotags = [];
    var_2 = level.ghettotag[var_0];

    for ( var_3 = 0; var_3 < var_2.size; var_3++ )
    {
        var_0 = spawn( "script_model", self.origin );
        var_0 setmodel( "axis" );
        var_0 linkto( self, var_1, var_2[var_3].origin, var_2[var_3].angles );
        var_0 notsolid();
        self.ghettotags[self.ghettotags.size] = var_0;
    }

    thread ghettotag_generate_sparks( var_1 );
}

remove_ghettotag()
{
    if ( !isdefined( self.ghettotags ) )
        return;

    common_scripts\utility::array_thread( self.ghettotags, maps\jeepride_code::deleteme );

    if ( !isdefined( self ) )
        return;

    self.ghettotags = [];
    self notify( "ghettotag_removed" );
}

transfer_ghettotag_to( var_0, var_1, var_2 )
{
    if ( !isdefined( self.ghettotags ) || self.ghettotags.size == 0 )
        return;

    remove_ghettotag();
    var_0 thread apply_ghettotag( var_1, var_2 );
}

get_dummy()
{
    var_0 = common_scripts\utility::ter_op( isdefined( self.modeldummyon ) && self.modeldummyon, self.modeldummy, self );
    return var_0;
}

ghettotag_generate_sparks( var_0 )
{
    self endon( "ghettotag_removed" );

    if ( !isdefined( var_0 ) )
        var_0 = "tag_body";

    var_1 = self.origin;
    wait 0.05;
    var_2 = gettime() + 1000;

    while ( isdefined( self ) )
    {
        var_3 = get_dummy() gettagorigin( var_0 );
        var_4 = distancesquared( var_3, var_1 );
        var_5 = 6;

        if ( var_4 > var_5 )
        {
            for ( var_6 = 0; var_6 < self.ghettotags.size; var_6++ )
            {
                var_7 = self.ghettotags[var_6].origin;
                var_8 = self.ghettotags[var_6].origin + maps\_utility::vector_multiply( anglestoup( self.ghettotags[var_6].angles ), 8 );
                var_9 = bullettrace( var_7, var_8, 0, self );

                if ( var_9["fraction"] < 1 && !trace_isjunk( var_9 ) )
                    playfxontag_record( getspark(), self.ghettotags[var_6], "polySurface1" );
            }

            var_2 = gettime() + 1000;
        }

        var_1 = var_3;
        wait 0.05;

        if ( gettime() > var_2 )
            return;
    }
}

getspark()
{
    if ( level.sparksclaimed > 3 )
        return "tunnelspark";
    else
    {
        thread claimspark();
        return "tunnelspark_dl";
    }
}

claimspark()
{
    level.sparksclaimed++;
    wait 0.05;
    level.sparksclaimed--;
}

trace_isjunk( var_0 )
{
    if ( isdefined( var_0["entity"] ) )
    {
        if ( var_0["entity"].classname == "script_model" )
            return 1;
    }

    return 0;
}

playfxontag_record( var_0, var_1, var_2 )
{
    playfxontag( level._effect[var_0], var_1, "polySurface1" );
}

treadfx_override()
{
    level.all_choppers = [ "script_vehicle_mi24p_hind_woodland", "script_vehicle_mi28_flying", "script_vehicle_mi17_woodland_fly_cheap" ];
    level.all_vehicles = [ "script_vehicle_bm21_cover_destructible", "script_vehicle_bm21_mobile_bed_destructible", "script_vehicle_bmp_woodland_jeepride", "script_vehicle_bus", "script_vehicle_luxurysedan", "script_vehicle_pickup_roobars", "script_vehicle_pickup_4door", "script_vehicle_small_hatchback_turq", "script_vehicle_small_wagon_white", "script_vehicle_tanker_truck_civ", "script_vehicle_uaz_fabric_destructible", "script_vehicle_uaz_hardtop_destructible", "script_vehicle_uaz_open_for_ride", "script_vehicle_uaz_open_destructible", "script_vehicle_uaz_van", "script_vehicle_80s_wagon1_green_destructible", "script_vehicle_80s_wagon1_tan_destructible", "script_vehicle_80s_hatch1_silv_destructible" ];

    foreach ( var_1 in level.all_vehicles )
    {
        maps\_treadfx::setvehiclefx( var_1, "asphalt", "vfx/treadfx/tread_road_jeepride" );
        maps\_treadfx::setvehiclefx( var_1, "grass", "vfx/treadfx/tread_dirt_jeepride" );
        maps\_treadfx::setvehiclefx( var_1, "dirt", "vfx/treadfx/tread_dirt_jeepride" );
        maps\_treadfx::setvehiclefx( var_1, "mud", "vfx/treadfx/tread_mud_jeepride" );
        maps\_treadfx::setvehiclefx( var_1, "snow", "vfx/treadfx/tread_mud_jeepride" );
        maps\_treadfx::setvehiclefx( var_1, "water", "vfx/treadfx/tread_water_jeepride" );
    }
}

heli_tread_fx_swap( var_0, var_1 )
{
    foreach ( var_3 in level.all_choppers )
    {
        maps\_treadfx::setallvehiclefx( var_3, var_0 );

        if ( isdefined( var_1 ) )
            maps\_treadfx::setvehiclefx( var_3, "water", var_1 );
    }
}

remove_light_group_from_vehicle( var_0, var_1 )
{
    if ( isdefined( level.vehicle_lights_group[var_0][var_1] ) )
    {
        var_2 = level.vehicle_lights_group[var_0][var_1];
        var_3 = level.vehicle_lights_group[var_0]["all"];

        foreach ( var_5 in var_2 )
            var_3 = common_scripts\utility::array_remove( var_3, var_5 );

        level.vehicle_lights_group[var_0]["all"] = var_3;
        level.vehicle_lights_group[var_0][var_1] = [];
    }
}

init_collapsing_bridge_parts()
{
    var_0 = getentarray( "collapsing_bridge_part", "script_noteworthy" );
    var_1 = [];
    var_2 = 71;

    if ( isdefined( var_0 ) && var_0.size > 0 )
    {
        foreach ( var_4 in var_0 )
        {
            if ( isdefined( var_4.target ) )
            {
                var_5 = getentarray( var_4.target, "targetname" );

                foreach ( var_7 in var_5 )
                {
                    if ( var_7.classname != "script_model" )
                        continue;

                    var_4 linkto( var_7 );
                    break;
                }
            }

            var_9 = var_4.script_index;

            if ( !isdefined( var_9 ) )
                var_9 = var_2;

            if ( !isdefined( var_1[var_9] ) )
                var_1[var_9] = [];

            var_1[var_9][var_1[var_9].size] = var_4;
            var_4 hide();
            var_4 notsolid();
        }
    }

    foreach ( var_9, var_12 in var_1 )
        thread show_bridge_parts_with_exploder( var_12, int( var_9 ) );
}

show_bridge_parts_with_exploder( var_0, var_1 )
{
    level waittill( "exploded_" + var_1 );

    foreach ( var_3 in var_0 )
    {
        var_3 show();
        var_3 solid();
    }
}
